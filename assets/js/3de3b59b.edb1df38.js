"use strict";(globalThis.webpackChunkstarward_docs=globalThis.webpackChunkstarward_docs||[]).push([[6528],{5608(e,s,t){t.r(s),t.d(s,{assets:()=>o,contentTitle:()=>l,default:()=>c,frontMatter:()=>r,metadata:()=>i,toc:()=>d});let i=JSON.parse('{"id":"module-guides/visibility","title":"Visibility Module","description":"The Visibility module provides tools for planning astronomical observations\u2014calculating airmass, transit times, rise/set events, and assessing overall target observability.","source":"@site/../docs/module-guides/visibility.md","sourceDirName":"module-guides","slug":"/module-guides/visibility","permalink":"/docs/module-guides/visibility","draft":false,"unlisted":false,"editUrl":"https://github.com/oddurs/starward/tree/master/../docs/module-guides/visibility.md","tags":[],"version":"current","lastUpdatedBy":"Oddur Sigurdsson","lastUpdatedAt":1768281447000,"sidebarPosition":8,"frontMatter":{"id":"visibility","title":"Visibility Module","sidebar_label":"Visibility","sidebar_position":8},"sidebar":"docs","previous":{"title":"Observer","permalink":"/docs/module-guides/observer"},"next":{"title":"Constants","permalink":"/docs/module-guides/constants"}}');var n=t(4848),a=t(8453);let r={id:"visibility",title:"Visibility Module",sidebar_label:"Visibility",sidebar_position:8},l="Visibility Module",o={},d=[{value:"Overview",id:"overview",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"CLI Usage",id:"cli-usage",level:3},{value:"Python API",id:"python-api",level:3},{value:"Airmass",id:"airmass",level:2},{value:"Airmass Limits",id:"airmass-limits",level:3},{value:"Target Altitude and Azimuth",id:"target-altitude-and-azimuth",level:2},{value:"Transit Time",id:"transit-time",level:2},{value:"Transit Altitude Formula",id:"transit-altitude-formula",level:3},{value:"Rise and Set Times",id:"rise-and-set-times",level:2},{value:"Circumpolar Objects",id:"circumpolar-objects",level:3},{value:"Moon Separation",id:"moon-separation",level:2},{value:"Night Check",id:"night-check",level:2},{value:"Comprehensive Visibility",id:"comprehensive-visibility",level:2},{value:"Planning an Observing Session",id:"planning-an-observing-session",level:2},{value:"Altitude Over Time",id:"altitude-over-time",level:2},{value:"CLI Reference",id:"cli-reference",level:2},{value:"See Also",id:"see-also",level:2}];function m(e){let s={a:"a",annotation:"annotation",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",mtext:"mtext",p:"p",pre:"pre",semantics:"semantics",span:"span",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"visibility-module",children:"Visibility Module"})}),"\n",(0,n.jsx)(s.p,{children:"The Visibility module provides tools for planning astronomical observations\u2014calculating airmass, transit times, rise/set events, and assessing overall target observability."}),"\n",(0,n.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,n.jsx)(s.p,{children:"Planning a successful observation requires knowing:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"When is the target above the horizon?"}),"\n",(0,n.jsx)(s.li,{children:"What's the best time to observe (lowest airmass)?"}),"\n",(0,n.jsx)(s.li,{children:"Will moonlight interfere?"}),"\n",(0,n.jsx)(s.li,{children:"Is it actually dark enough?"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"This module answers all these questions."}),"\n",(0,n.jsx)(s.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,n.jsx)(s.h3,{id:"cli-usage",children:"CLI Usage"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:'# Target altitude now\nstarward vis altitude "12h00m00s" "+45d00m00s" --lat 51.5 --lon -0.1\n\n# Current airmass\nstarward vis airmass "12h00m00s" "+45d00m00s" --lat 51.5 --lon -0.1\n\n# Transit time\nstarward vis transit "12h00m00s" "+45d00m00s" --lat 51.5 --lon -0.1\n\n# Rise and set times\nstarward vis riseset "12h00m00s" "+45d00m00s" --lat 51.5 --lon -0.1\n\n# Moon separation\nstarward vis moonsep "12h00m00s" "+45d00m00s"\n'})}),"\n",(0,n.jsx)(s.h3,{id:"python-api",children:"Python API"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:'from starward.core.visibility import (\n    airmass, target_altitude, target_azimuth,\n    transit_time, transit_altitude_calc, target_rise_set,\n    moon_target_separation, is_night, compute_visibility\n)\nfrom starward.core.coords import ICRSCoord\nfrom starward.core.observer import Observer\nfrom starward.core.time import jd_now\nfrom starward.core.angles import Angle\n\n# Setup\nm31 = ICRSCoord.parse("00h42m44s +41d16m09s")  # Andromeda Galaxy\nobserver = Observer.from_degrees("Home", 40.7, -74.0)\njd = jd_now()\n\n# Current visibility\nalt = target_altitude(m31, observer, jd)\naz = target_azimuth(m31, observer, jd)\nX = airmass(alt)\n\nprint(f"Altitude: {alt.degrees:.1f}\xb0")\nprint(f"Azimuth: {az.degrees:.1f}\xb0")\nprint(f"Airmass: {X:.2f}")\n\n# Best time to observe\ntransit = transit_time(m31, observer, jd)\nmax_alt = transit_altitude_calc(m31, observer)\nprint(f"Transit: {transit.to_datetime()}")\nprint(f"Max altitude: {max_alt.degrees:.1f}\xb0")\n'})}),"\n",(0,n.jsx)(s.h2,{id:"airmass",children:"Airmass"}),"\n",(0,n.jsx)(s.p,{children:"Airmass measures how much atmosphere light must traverse. Lower is better."}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Airmass"}),(0,n.jsx)(s.th,{children:"Altitude"}),(0,n.jsx)(s.th,{children:"Quality"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"1.0"}),(0,n.jsx)(s.td,{children:"90\xb0 (zenith)"}),(0,n.jsx)(s.td,{children:"Excellent"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"1.2"}),(0,n.jsx)(s.td,{children:"56\xb0"}),(0,n.jsx)(s.td,{children:"Very good"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"1.5"}),(0,n.jsx)(s.td,{children:"42\xb0"}),(0,n.jsx)(s.td,{children:"Good"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"2.0"}),(0,n.jsx)(s.td,{children:"30\xb0"}),(0,n.jsx)(s.td,{children:"Acceptable"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"3.0"}),(0,n.jsx)(s.td,{children:"19\xb0"}),(0,n.jsx)(s.td,{children:"Poor"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"\u221E"}),(0,n.jsx)(s.td,{children:"0\xb0 (horizon)"}),(0,n.jsx)(s.td,{children:"Below horizon"})]})]})]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:'from starward.core.visibility import airmass\nfrom starward.core.angles import Angle\n\n# From altitude\nalt = Angle(degrees=45)\nX = airmass(alt)\nprint(f"Airmass at 45\xb0: {X:.2f}")  # ~1.41\n\n# From target\nalt = target_altitude(target, observer, jd)\nX = airmass(alt)\n'})}),"\n",(0,n.jsx)(s.h3,{id:"airmass-limits",children:"Airmass Limits"}),"\n",(0,n.jsx)(s.p,{children:"Most observations should stay below airmass 2.0:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:"def is_observable(target, observer, jd, max_airmass=2.0):\n    alt = target_altitude(target, observer, jd)\n    if alt.degrees <= 0:\n        return False\n    return airmass(alt) < max_airmass\n"})}),"\n",(0,n.jsx)(s.h2,{id:"target-altitude-and-azimuth",children:"Target Altitude and Azimuth"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:'# Current position in local sky\nalt = target_altitude(target, observer, jd)\naz = target_azimuth(target, observer, jd)\n\nprint(f"Position: Alt {alt.degrees:.1f}\xb0, Az {az.degrees:.1f}\xb0")\n\n# Azimuth convention: 0\xb0=N, 90\xb0=E, 180\xb0=S, 270\xb0=W\n'})}),"\n",(0,n.jsx)(s.h2,{id:"transit-time",children:"Transit Time"}),"\n",(0,n.jsx)(s.p,{children:"Transit is when an object crosses the local meridian (highest altitude):"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:'# Time of next transit\ntransit = transit_time(target, observer, jd)\nprint(f"Transit at: {transit.to_datetime()}")\n\n# Maximum altitude (achieved at transit)\nmax_alt = transit_altitude_calc(target, observer)\nprint(f"Maximum altitude: {max_alt.degrees:.1f}\xb0")\n\n# Minimum airmass\nmin_airmass = airmass(max_alt)\nprint(f"Best airmass: {min_airmass:.2f}")\n'})}),"\n",(0,n.jsx)(s.h3,{id:"transit-altitude-formula",children:"Transit Altitude Formula"}),"\n",(0,n.jsx)(s.p,{children:"For any observer at latitude \u03C6 and target at declination \u03B4:"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mtext,{children:"max\xa0altitude"}),(0,n.jsx)(s.mo,{children:"="}),(0,n.jsx)(s.mn,{children:"90"}),(0,n.jsx)(s.mi,{mathvariant:"normal",children:"\xb0"}),(0,n.jsx)(s.mo,{children:"\u2212"}),(0,n.jsx)(s.mi,{mathvariant:"normal",children:"\u2223"}),(0,n.jsx)(s.mi,{children:"\u03C6"}),(0,n.jsx)(s.mo,{children:"\u2212"}),(0,n.jsx)(s.mi,{children:"\u03B4"}),(0,n.jsx)(s.mi,{mathvariant:"normal",children:"\u2223"})]}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\text{max altitude} = 90\xb0 - |\u03C6 - \u03B4|"})]})})}),(0,n.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.6944em"}}),(0,n.jsx)(s.span,{className:"mord text",children:(0,n.jsx)(s.span,{className:"mord",children:"max\xa0altitude"})}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(s.span,{className:"mrel",children:"="}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.7778em",verticalAlign:"-0.0833em"}}),(0,n.jsx)(s.span,{className:"mord",children:"90\xb0"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"\u2212"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.jsx)(s.span,{className:"mord",children:"\u2223"}),(0,n.jsx)(s.span,{className:"mord mathnormal",children:"\u03C6"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"\u2212"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03785em"},children:"\u03B4"}),(0,n.jsx)(s.span,{className:"mord",children:"\u2223"})]})]})]})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:"# A target at declination +40\xb0 viewed from latitude +40\xb0\n# transits at zenith (90\xb0 altitude)\n"})}),"\n",(0,n.jsx)(s.h2,{id:"rise-and-set-times",children:"Rise and Set Times"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:'# Get rise and set times\nrise, set_t = target_rise_set(target, observer, jd)\n\nif rise and set_t:\n    print(f"Rises: {rise.to_datetime()}")\n    print(f"Sets: {set_t.to_datetime()}")\n    \n    # Duration above horizon\n    hours_up = (set_t.jd - rise.jd) * 24\n    print(f"Above horizon: {hours_up:.1f} hours")\n'})}),"\n",(0,n.jsx)(s.h3,{id:"circumpolar-objects",children:"Circumpolar Objects"}),"\n",(0,n.jsx)(s.p,{children:"Objects that never set (circumpolar) or never rise:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:'rise, set_t = target_rise_set(target, observer, jd)\n\nif rise is None and set_t is None:\n    max_alt = transit_altitude_calc(target, observer)\n    if max_alt.degrees > 0:\n        print("Circumpolar - always above horizon")\n    else:\n        print("Never rises at this latitude")\n'})}),"\n",(0,n.jsx)(s.h2,{id:"moon-separation",children:"Moon Separation"}),"\n",(0,n.jsx)(s.p,{children:"For deep-sky imaging, moonlight is the enemy:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:'from starward.core.visibility import moon_target_separation\n\nsep = moon_target_separation(target, jd)\nprint(f"Moon separation: {sep.degrees:.1f}\xb0")\n\n# Rule of thumb\nif sep.degrees < 30:\n    print("\u26A0\uFE0F Moon nearby - may affect observations")\nelif sep.degrees < 60:\n    print("Moon moderately close")\nelse:\n    print("Good moon separation")\n'})}),"\n",(0,n.jsx)(s.h2,{id:"night-check",children:"Night Check"}),"\n",(0,n.jsx)(s.p,{children:"Is it actually dark?"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:'from starward.core.visibility import is_night\n\nif is_night(observer, jd):\n    print("It\'s nighttime!")\nelse:\n    print("Sun is up")\n'})}),"\n",(0,n.jsx)(s.p,{children:"For astronomical darkness (Sun below -18\xb0), combine with twilight:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:"from starward.core.sun import astronomical_twilight\n\nastro_start, astro_end = astronomical_twilight(observer, jd)\n# True darkness is between these times\n"})}),"\n",(0,n.jsx)(s.h2,{id:"comprehensive-visibility",children:"Comprehensive Visibility"}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"compute_visibility()"})," function provides a complete assessment:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:"from starward.core.visibility import compute_visibility\n\nvis = compute_visibility(target, observer, jd)\n\n# vis is a dictionary containing:\n# - altitude: current altitude\n# - azimuth: current azimuth  \n# - airmass: current airmass\n# - transit_time: time of transit\n# - transit_altitude: maximum altitude\n# - rise_time: rise time\n# - set_time: set time\n# - moon_separation: angular distance from Moon\n# - is_night: whether Sun is down\n# - is_observable: overall assessment\n"})}),"\n",(0,n.jsx)(s.h2,{id:"planning-an-observing-session",children:"Planning an Observing Session"}),"\n",(0,n.jsx)(s.p,{children:"Example workflow for planning observations:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:'from starward.core.visibility import *\nfrom starward.core.sun import sunset, astronomical_twilight\nfrom starward.core.moon import moon_phase\n\n# Tonight\'s observation planning\nobserver = Observer.from_degrees("Home", 40.7, -74.0)\njd_start = JulianDate.from_calendar(2024, 3, 15, 20, 0, 0)  # 8 PM local\n\n# When does it get dark?\nastro_start, astro_end = astronomical_twilight(observer, jd_start)\nprint(f"Astronomical darkness: {astro_start.to_datetime()} to {astro_end.to_datetime()}")\n\n# Moon situation\nphase = moon_phase(jd_start)\nprint(f"Moon phase: {phase.name} ({phase.percent_illuminated:.0f}%)")\n\n# Target visibility\ntargets = [\n    ("M31", ICRSCoord.parse("00h42m44s +41d16m09s")),\n    ("M42", ICRSCoord.parse("05h35m17s -05d23m28s")),\n    ("M51", ICRSCoord.parse("13h29m53s +47d11m43s")),\n]\n\nprint("\\nTarget Visibility Tonight:")\nfor name, coord in targets:\n    vis = compute_visibility(coord, observer, jd_start)\n    print(f"\\n{name}:")\n    print(f"  Transit: {vis[\'transit_time\'].to_datetime().strftime(\'%H:%M\')}")\n    print(f"  Max alt: {vis[\'transit_altitude\'].degrees:.0f}\xb0")\n    print(f"  Moon sep: {vis[\'moon_separation\'].degrees:.0f}\xb0")\n'})}),"\n",(0,n.jsx)(s.h2,{id:"altitude-over-time",children:"Altitude Over Time"}),"\n",(0,n.jsx)(s.p,{children:"Track altitude throughout the night:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:"import matplotlib.pyplot as plt\n\ntimes = []\naltitudes = []\n\n# Sample every 30 minutes for 12 hours\nfor i in range(25):\n    jd_sample = JulianDate(jd_start.jd + i * 0.5/24)\n    alt = target_altitude(target, observer, jd_sample)\n    times.append(i * 0.5)\n    altitudes.append(alt.degrees)\n\nplt.plot(times, altitudes)\nplt.xlabel(\"Hours from start\")\nplt.ylabel(\"Altitude (degrees)\")\nplt.axhline(y=30, color='r', linestyle='--', label='30\xb0 limit')\nplt.title(\"Target Altitude Tonight\")\nplt.legend()\nplt.show()\n"})}),"\n",(0,n.jsx)(s.h2,{id:"cli-reference",children:"CLI Reference"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"# Altitude\nstarward vis altitude RA DEC --lat LAT --lon LON [--jd JD] [--json]\n\n# Airmass\nstarward vis airmass RA DEC --lat LAT --lon LON [--jd JD]\n\n# Transit\nstarward vis transit RA DEC --lat LAT --lon LON [--jd JD]\n\n# Rise/Set\nstarward vis riseset RA DEC --lat LAT --lon LON [--jd JD]\n\n# Moon separation\nstarward vis moonsep RA DEC [--jd JD]\n\n# Full visibility report\nstarward vis report RA DEC --lat LAT --lon LON [--jd JD] [--json]\n"})}),"\n",(0,n.jsx)(s.h2,{id:"see-also",children:"See Also"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"/docs/module-guides/sun",children:"Sun Module"})," - Twilight and darkness"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"/docs/module-guides/moon",children:"Moon Module"})," - Lunar interference"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"/docs/module-guides/observer",children:"Observer Module"})," - Location management"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"/docs/module-guides/coords",children:"Coords Module"})," - Coordinate systems"]}),"\n"]})]})}function c(e={}){let{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(m,{...e})}):m(e)}},8453(e,s,t){t.d(s,{R:()=>r,x:()=>l});var i=t(6540);let n={},a=i.createContext(n);function r(e){let s=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),i.createElement(a.Provider,{value:s},e.children)}}}]);