"use strict";(globalThis.webpackChunkstarward_docs=globalThis.webpackChunkstarward_docs||[]).push([[9126],{4847(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>a});let i=JSON.parse('{"id":"module-guides/moon","title":"Moon Module","description":"The Moon module provides calculations for lunar position, phases, rise/set times, and related phenomena. Essential for planning observations and understanding our celestial companion.","source":"@site/../docs/module-guides/moon.md","sourceDirName":"module-guides","slug":"/module-guides/moon","permalink":"/docs/module-guides/moon","draft":false,"unlisted":false,"editUrl":"https://github.com/oddurs/starward/tree/master/../docs/module-guides/moon.md","tags":[],"version":"current","lastUpdatedBy":"Oddur Sigurdsson","lastUpdatedAt":1768281447000,"sidebarPosition":5,"frontMatter":{"id":"moon","title":"Moon Module","sidebar_label":"Moon","sidebar_position":5},"sidebar":"docs","previous":{"title":"Sun","permalink":"/docs/module-guides/sun"},"next":{"title":"Planets","permalink":"/docs/module-guides/planets"}}');var o=s(4848),r=s(8453);let t={id:"moon",title:"Moon Module",sidebar_label:"Moon",sidebar_position:5},d="Moon Module",l={},a=[{value:"Overview",id:"overview",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"CLI Usage",id:"cli-usage",level:3},{value:"Python API",id:"python-api",level:3},{value:"Lunar Position",id:"lunar-position",level:2},{value:"Distance and Size",id:"distance-and-size",level:3},{value:"Moon Phase",id:"moon-phase",level:2},{value:"Phase Names",id:"phase-names",level:3},{value:"Finding Next Phases",id:"finding-next-phases",level:2},{value:"Moonrise and Moonset",id:"moonrise-and-moonset",level:2},{value:"Edge Cases",id:"edge-cases",level:3},{value:"Moon Altitude",id:"moon-altitude",level:2},{value:"The Synodic Month",id:"the-synodic-month",level:2},{value:"Observation Planning",id:"observation-planning",level:2},{value:"Moon-Target Separation",id:"moon-target-separation",level:3},{value:"Best Observation Windows",id:"best-observation-windows",level:3},{value:"Lunar Libration",id:"lunar-libration",level:2},{value:"Algorithm Details",id:"algorithm-details",level:2},{value:"CLI Reference",id:"cli-reference",level:2},{value:"See Also",id:"see-also",level:2}];function c(e){let n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"moon-module",children:"Moon Module"})}),"\n",(0,o.jsx)(n.p,{children:"The Moon module provides calculations for lunar position, phases, rise/set times, and related phenomena. Essential for planning observations and understanding our celestial companion."}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(n.p,{children:"The Moon's motion is complex\u2014more so than any other celestial body we observe regularly. This module implements algorithms suitable for:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Lunar position (RA/Dec, ecliptic coordinates)"}),"\n",(0,o.jsx)(n.li,{children:"Moon phase (illumination, age, phase name)"}),"\n",(0,o.jsx)(n.li,{children:"Moonrise and moonset times"}),"\n",(0,o.jsx)(n.li,{children:"Next occurrence of major phases"}),"\n",(0,o.jsx)(n.li,{children:"Angular diameter and parallax"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Accuracy"}),": Position ~0.5\xb0 (sufficient for rise/set and phase calculations)."]}),"\n",(0,o.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,o.jsx)(n.h3,{id:"cli-usage",children:"CLI Usage"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Current lunar position\nstarward moon position\n\n# Current phase information\nstarward moon phase\n\n# Moonrise and moonset\nstarward moon rise --lat 51.5 --lon -0.1\nstarward moon set --lat 51.5 --lon -0.1\n\n# Next full moon\nstarward moon next full\n\n# Next new moon\nstarward moon next new\n"})}),"\n",(0,o.jsx)(n.h3,{id:"python-api",children:"Python API"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'from starward.core.moon import (\n    moon_position, moon_phase, moon_altitude,\n    moonrise, moonset, next_phase, MoonPhase\n)\nfrom starward.core.observer import Observer\nfrom starward.core.time import jd_now\n\n# Create an observer\ngreenwich = Observer.from_degrees("Greenwich", 51.4772, -0.0005)\n\n# Get current lunar position\njd = jd_now()\npos = moon_position(jd)\nprint(f"Moon RA: {pos.ra.hours:.2f}h, Dec: {pos.dec.degrees:.1f}\xb0")\nprint(f"Distance: {pos.distance_km:.0f} km")\n\n# Current phase\nphase = moon_phase(jd)\nprint(f"Phase: {phase.name}")\nprint(f"Illumination: {phase.percent_illuminated:.0f}%")\nprint(f"Age: {phase.age_days:.1f} days")\n\n# Moonrise and moonset\nrise = moonrise(greenwich, jd)\nif rise:\n    print(f"Moonrise: {rise.to_datetime()}")\n\n# Next full moon\nnext_full = next_phase(jd, MoonPhase.FULL_MOON)\nprint(f"Next full moon: {next_full.to_datetime()}")\n'})}),"\n",(0,o.jsx)(n.h2,{id:"lunar-position",children:"Lunar Position"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"moon_position()"})," function returns a ",(0,o.jsx)(n.code,{children:"MoonPosition"})," object containing:"]}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Field"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"longitude"})}),(0,o.jsx)(n.td,{children:"Ecliptic longitude (Angle)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"latitude"})}),(0,o.jsx)(n.td,{children:"Ecliptic latitude (Angle, \xb15.3\xb0)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"ra"})}),(0,o.jsx)(n.td,{children:"Right Ascension (Angle)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"dec"})}),(0,o.jsx)(n.td,{children:"Declination (Angle)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"distance_km"})}),(0,o.jsx)(n.td,{children:"Distance in kilometers"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"angular_diameter"})}),(0,o.jsx)(n.td,{children:"Apparent size (Angle)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"parallax"})}),(0,o.jsx)(n.td,{children:"Horizontal parallax (Angle)"})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"distance-and-size",children:"Distance and Size"}),"\n",(0,o.jsx)(n.p,{children:"The Moon's distance varies from ~356,500 km (perigee) to ~406,700 km (apogee), causing its apparent size to vary:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'pos = moon_position(jd)\nprint(f"Distance: {pos.distance_km:.0f} km")\nprint(f"Angular diameter: {pos.angular_diameter.arcminutes:.1f} arcmin")\nprint(f"Parallax: {pos.parallax.degrees:.2f}\xb0")\n'})}),"\n",(0,o.jsx)(n.p,{children:'When the Moon is closer, it appears larger\u2014a "supermoon" occurs when a full moon coincides with perigee.'}),"\n",(0,o.jsx)(n.h2,{id:"moon-phase",children:"Moon Phase"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"moon_phase()"})," function returns a ",(0,o.jsx)(n.code,{children:"MoonPhaseInfo"})," object:"]}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Field"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"phase_angle"})}),(0,o.jsx)(n.td,{children:"Phase angle (0\xb0 = new, 180\xb0 = full)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"illumination"})}),(0,o.jsx)(n.td,{children:"Illuminated fraction (0-1)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"percent_illuminated"})}),(0,o.jsx)(n.td,{children:"Percentage (0-100)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"age_days"})}),(0,o.jsx)(n.td,{children:"Days since new moon (0-29.5)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"name"})}),(0,o.jsx)(n.td,{children:"Phase name (string)"})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"phase-names",children:"Phase Names"}),"\n",(0,o.jsx)(n.p,{children:"The lunar cycle is divided into eight phases:"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Phase"}),(0,o.jsx)(n.th,{children:"Age (days)"}),(0,o.jsx)(n.th,{children:"Illumination"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"New Moon"}),(0,o.jsx)(n.td,{children:"0"}),(0,o.jsx)(n.td,{children:"0%"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Waxing Crescent"}),(0,o.jsx)(n.td,{children:"1-7"}),(0,o.jsx)(n.td,{children:"0-50%"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"First Quarter"}),(0,o.jsx)(n.td,{children:"~7.4"}),(0,o.jsx)(n.td,{children:"50%"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Waxing Gibbous"}),(0,o.jsx)(n.td,{children:"7-15"}),(0,o.jsx)(n.td,{children:"50-100%"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Full Moon"}),(0,o.jsx)(n.td,{children:"~14.8"}),(0,o.jsx)(n.td,{children:"100%"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Waning Gibbous"}),(0,o.jsx)(n.td,{children:"15-22"}),(0,o.jsx)(n.td,{children:"100-50%"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Last Quarter"}),(0,o.jsx)(n.td,{children:"~22.1"}),(0,o.jsx)(n.td,{children:"50%"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Waning Crescent"}),(0,o.jsx)(n.td,{children:"22-29.5"}),(0,o.jsx)(n.td,{children:"50-0%"})]})]})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'phase = moon_phase(jd)\nprint(f"Phase: {phase.name}")\nprint(f"Age: {phase.age_days:.1f} days")\nprint(f"Illumination: {phase.percent_illuminated:.0f}%")\n'})}),"\n",(0,o.jsx)(n.h2,{id:"finding-next-phases",children:"Finding Next Phases"}),"\n",(0,o.jsx)(n.p,{children:"Find the next occurrence of a major phase:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'from starward.core.moon import next_phase, MoonPhase\n\njd = jd_now()\n\n# Major phases\nnext_new = next_phase(jd, MoonPhase.NEW_MOON)\nnext_first = next_phase(jd, MoonPhase.FIRST_QUARTER)\nnext_full = next_phase(jd, MoonPhase.FULL_MOON)\nnext_last = next_phase(jd, MoonPhase.LAST_QUARTER)\n\nprint(f"Next new moon: {next_new.to_datetime()}")\nprint(f"Next full moon: {next_full.to_datetime()}")\n'})}),"\n",(0,o.jsx)(n.h2,{id:"moonrise-and-moonset",children:"Moonrise and Moonset"}),"\n",(0,o.jsx)(n.p,{children:"Unlike the Sun, the Moon rises and sets at very different times each day (about 50 minutes later each day on average):"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'rise = moonrise(observer, jd)\nset_t = moonset(observer, jd)\n\nif rise and set_t:\n    print(f"Moonrise: {rise.to_datetime()}")\n    print(f"Moonset: {set_t.to_datetime()}")\n'})}),"\n",(0,o.jsx)(n.h3,{id:"edge-cases",children:"Edge Cases"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"The Moon may not rise or set on a given day"}),"\n",(0,o.jsx)(n.li,{children:"Near full moon, moonrise occurs around sunset"}),"\n",(0,o.jsx)(n.li,{children:"Near new moon, moonrise occurs around sunrise"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"moon-altitude",children:"Moon Altitude"}),"\n",(0,o.jsx)(n.p,{children:"Calculate the Moon's altitude at any time:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'alt = moon_altitude(observer, jd)\nprint(f"Moon altitude: {alt.degrees:.1f}\xb0")\n\nif alt.degrees > 0:\n    print("Moon is up")\n'})}),"\n",(0,o.jsx)(n.h2,{id:"the-synodic-month",children:"The Synodic Month"}),"\n",(0,o.jsx)(n.p,{children:"The synodic month (new moon to new moon) averages 29.53 days but varies due to the elliptical orbit:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# Find two consecutive new moons\nnew1 = next_phase(jd, MoonPhase.NEW_MOON)\nnew2 = next_phase(JulianDate(new1.jd + 1), MoonPhase.NEW_MOON)\n\nsynodic_month = new2.jd - new1.jd\nprint(f"This synodic month: {synodic_month:.2f} days")\n'})}),"\n",(0,o.jsx)(n.h2,{id:"observation-planning",children:"Observation Planning"}),"\n",(0,o.jsx)(n.h3,{id:"moon-target-separation",children:"Moon-Target Separation"}),"\n",(0,o.jsx)(n.p,{children:"For deep-sky observations, moonlight can be problematic. Use the visibility module:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'from starward.core.visibility import moon_target_separation\nfrom starward.core.coords import ICRSCoord\n\ntarget = ICRSCoord.from_degrees(83.63, 22.01)  # M1 Crab Nebula\nsep = moon_target_separation(target, jd)\nprint(f"Moon separation: {sep.degrees:.1f}\xb0")\n\nif sep.degrees < 30:\n    print("Moon may affect observations")\n'})}),"\n",(0,o.jsx)(n.h3,{id:"best-observation-windows",children:"Best Observation Windows"}),"\n",(0,o.jsx)(n.p,{children:"For faint objects, plan observations when:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Moon is below the horizon"}),"\n",(0,o.jsx)(n.li,{children:"Moon is far from target (>60\xb0)"}),"\n",(0,o.jsx)(n.li,{children:"Moon is near new phase"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"lunar-libration",children:"Lunar Libration"}),"\n",(0,o.jsx)(n.p,{children:'Although not directly computed by this module, the Moon\'s apparent "wobble" (libration) means we can see about 59% of its surface over time, not just 50%.'}),"\n",(0,o.jsx)(n.h2,{id:"algorithm-details",children:"Algorithm Details"}),"\n",(0,o.jsxs)(n.p,{children:["This module uses the simplified lunar theory from Jean Meeus' ",(0,o.jsx)(n.em,{children:"Astronomical Algorithms"}),", incorporating:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Mean orbital elements"}),"\n",(0,o.jsx)(n.li,{children:"Major perturbations from the Sun"}),"\n",(0,o.jsx)(n.li,{children:"Variation in orbital speed"}),"\n",(0,o.jsx)(n.li,{children:"Parallax correction"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"For higher precision (sub-arcminute), consider ELP/MPP02 (not yet implemented)."}),"\n",(0,o.jsx)(n.h2,{id:"cli-reference",children:"CLI Reference"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Position\nstarward moon position [--jd JD] [--json] [--verbose]\n\n# Phase\nstarward moon phase [--jd JD] [--json]\n\n# Rise/Set\nstarward moon rise --lat LAT --lon LON [--jd JD]\nstarward moon set --lat LAT --lon LON [--jd JD]\n\n# Altitude\nstarward moon altitude --lat LAT --lon LON [--jd JD]\n\n# Next phase (full|new|first|last)\nstarward moon next PHASE [--jd JD]\n"})}),"\n",(0,o.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"/docs/module-guides/sun",children:"Sun Module"})," - Solar calculations"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"/docs/module-guides/visibility",children:"Visibility Module"})," - Observation planning"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"/docs/module-guides/observer",children:"Observer Module"})," - Location management"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453(e,n,s){s.d(n,{R:()=>t,x:()=>d});var i=s(6540);let o={},r=i.createContext(o);function t(e){let n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);